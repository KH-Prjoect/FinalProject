<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.board.qna">



	<select id="selectList" resultType="QboardDto">
		SELECT BQ_NUM, BQ_TITLE,
		BQ_CONTENT, BQ_REGDATE,
		BQ_COMPLETE,BQ_ANSWER,MEMBER_ID
		FROM
		BOARDQNA
		ORDER BY BQ_NUM DESC
	</select>

	<select id="selectOne" parameterType="int"
		resultType="QboardDto">
		SELECT BQ_NUM, BQ_TITLE,
		BQ_CONTENT, BQ_REGDATE,
		BQ_COMPLETE,BQ_ANSWER,MEMBER_ID
		FROM
		BOARDQNA
		WHERE BQ_NUM = #{BQ_num}
	</select>

	<insert id="insert" parameterType="QboardDto">
		INSERT INTO BOARDQNA
		VALUES(BQNUMSEQ.NEXTVAL,#{bq_title},#{bq_content},SYSDATE,'N','',#{member_id})
	</insert>

	<update id="update" parameterType="QboardDto">
		UPDATE BOARDQNA
		SET BQ_TITLE
		= #{bq_title}, BQ_CONTENT = #{bq_content}
		WHERE BQ_NUM = #{bq_num}
	</update>

	<update id="delete" parameterType="int">
		DELETE FROM BOARDQNA
		WHERE
		BQ_NUM = #{bq_num} AND
		BQ_ANSWER != NULL
	</update>


	<!-- 총 게시글 갯수 출력 -->
	<select id="countBoard" resultType="int">
		SELECT COUNT(*) FROM
		BOARDQNA

	</select>

	<!-- 페이징 처리 후 게시글 조회 -->
	<select id="selectBoard" resultType="QboardDto"
		parameterType="PagingDto">
		SELECT BQ_NUM, BQ_TITLE,
		BQ_CONTENT, BQ_REGDATE,
		BQ_COMPLETE,BQ_ANSWER,MEMBER_ID
		FROM (
		SELECT
		ROWNUM
		RN, A.BQ_NUM, BQ_TITLE,
		BQ_CONTENT, BQ_REGDATE,
		BQ_COMPLETE,BQ_ANSWER,MEMBER_ID
		FROM (
		SELECT
		BQ_NUM, BQ_TITLE,
		BQ_CONTENT, BQ_REGDATE,
		BQ_COMPLETE,BQ_ANSWER,MEMBER_ID
		FROM
		BOARDQNA
		ORDER BY BQ_NUM DESC
		) A
		)
		WHERE (RN BETWEEN #{start} AND
		#{end}) 
	</select>




</mapper>
